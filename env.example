# ========================================
# DATABASE SERVICE - ENVIRONMENT VARIABLES
# ========================================
# Copy this file to .env and fill in your actual values
# cp env.example .env

# ========================================
# SERVER CONFIGURATION
# ========================================
PORT=5001
NODE_ENV=development

# ========================================
# MONGODB CONFIGURATION
# ========================================
# Option 1: Complete connection string (recommended)
MONGODB_URI=mongodb://localhost:27017/art_advisor

# Option 2: Individual components (alternative)
# MONGODB_USERNAME=your_mongodb_username
# MONGODB_PASSWORD=your_mongodb_password
# MONGODB_HOST=localhost
# MONGODB_PORT=27017
# MONGODB_DATABASE=art_advisor

# Option 3: MongoDB Atlas (cloud)
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/art_advisor?retryWrites=true&w=majority

# ========================================
# MONGODB CONNECTION OPTIONS
# ========================================
# Connection pool settings
MONGODB_POOL_SIZE=10
MONGODB_SERVER_SELECTION_TIMEOUT=5000
MONGODB_SOCKET_TIMEOUT=45000
MONGODB_CONNECT_TIMEOUT=10000

# Authentication options
MONGODB_AUTH_SOURCE=admin
MONGODB_AUTH_MECHANISM=SCRAM-SHA-1

# SSL/TLS options (for production)
MONGODB_SSL=false
MONGODB_SSL_VALIDATE=false
MONGODB_SSL_CA_FILE=/path/to/ca.pem

# ========================================
# SERVICE URLs
# ========================================
# Frontend URLs
FRONTEND_URL=http://localhost:3000
CLIENT_URL=http://localhost:3000

# Inter-service communication URLs
AUTH_SERVICE_URL=http://localhost:5002
PAYMENT_SERVICE_URL=http://localhost:3004
AI_SERVICE_URL=http://localhost:5005
NOTIFICATION_SERVICE_URL=http://localhost:5006
METRICS_SERVICE_URL=http://localhost:5007

# ========================================
# SECURITY CONFIGURATION
# ========================================
# JWT secret for inter-service communication
JWT_SECRET=your-jwt-secret-for-service-communication-32-chars-minimum

# Trust proxy (for production behind reverse proxy)
TRUST_PROXY=1

# CORS configuration
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# ========================================
# LOGGING CONFIGURATION
# ========================================
LOG_LEVEL=info
LOG_FILE=logs/db-service.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_COLORIZE=true
LOG_TIMESTAMP=true

# MongoDB query logging
MONGODB_DEBUG=false
MONGODB_LOG_QUERIES=false

# ========================================
# MONITORING CONFIGURATION
# ========================================
# Prometheus metrics
PROMETHEUS_PORT=9090
METRICS_ENDPOINT=/metrics
METRICS_COLLECTION_INTERVAL=15000

# Health check settings
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ========================================
# PERFORMANCE CONFIGURATION
# ========================================
# Query optimization
QUERY_TIMEOUT=30000
MAX_QUERY_RESULTS=1000
DEFAULT_PAGE_SIZE=10
MAX_PAGE_SIZE=100

# Caching settings
CACHE_ENABLED=false
CACHE_TTL=300000
CACHE_MAX_SIZE=100

# ========================================
# DATA VALIDATION
# ========================================
# Input validation settings
VALIDATION_STRICT=true
VALIDATION_STRIP_UNKNOWN=true
VALIDATION_ABORT_EARLY=false

# Data sanitization
SANITIZE_INPUTS=true
SANITIZE_OUTPUTS=true

# ========================================
# BACKUP CONFIGURATION
# ========================================
# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=/backups/mongodb

# Backup compression
BACKUP_COMPRESS=true
BACKUP_COMPRESSION_LEVEL=6

# ========================================
# ERROR HANDLING
# ========================================
# Error reporting
ERROR_REPORTING_ENABLED=false
ERROR_REPORTING_SERVICE=sentry
ERROR_REPORTING_DSN=your-sentry-dsn

# Error logging
ERROR_LOG_LEVEL=error
ERROR_LOG_FILE=logs/error.log
ERROR_LOG_MAX_SIZE=5m
ERROR_LOG_MAX_FILES=3

# ========================================
# RATE LIMITING
# ========================================
# Rate limiting settings
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# Rate limiting by endpoint
RATE_LIMIT_READ_ENDPOINTS=200
RATE_LIMIT_WRITE_ENDPOINTS=50
RATE_LIMIT_DELETE_ENDPOINTS=20

# ========================================
# PRODUCTION OVERRIDES
# ========================================
# Uncomment and modify for production deployment
# NODE_ENV=production
# PORT=5001
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/art_advisor?retryWrites=true&w=majority
# FRONTEND_URL=https://yourdomain.com
# CLIENT_URL=https://yourdomain.com
# CORS_ORIGIN=https://yourdomain.com
# TRUST_PROXY=1
# MONGODB_POOL_SIZE=20
# MONGODB_SSL=true
# MONGODB_SSL_VALIDATE=true
# LOG_LEVEL=warn
# CACHE_ENABLED=true
# ERROR_REPORTING_ENABLED=true

# ========================================
# DEVELOPMENT OVERRIDES
# ========================================
# Uncomment for development
# LOG_LEVEL=debug
# MONGODB_DEBUG=true
# MONGODB_LOG_QUERIES=true
# CORS_ORIGIN=http://localhost:3000,http://localhost:3001
# VALIDATION_STRICT=false

# ========================================
# TESTING CONFIGURATION
# ========================================
# Test database (for running tests)
TEST_MONGODB_URI=mongodb://localhost:27017/art_advisor_test
TEST_JWT_SECRET=test-jwt-secret-for-testing-only
TEST_LOG_LEVEL=error

# Test data
TEST_DATA_ENABLED=false
TEST_DATA_PATH=./test-data

# ========================================
# DATABASE INDEXES
# ========================================
# Auto-create indexes on startup
AUTO_CREATE_INDEXES=true

# Index configuration
INDEX_USERS_EMAIL=true
INDEX_USERS_CREATED_AT=true
INDEX_ANALYSES_USER_ID=true
INDEX_ANALYSES_CREATED_AT=true
INDEX_PAYMENTS_USER_ID=true
INDEX_PAYMENTS_CREATED_AT=true

# ========================================
# DATA MIGRATION
# ========================================
# Migration settings
MIGRATION_ENABLED=false
MIGRATION_PATH=./migrations
MIGRATION_AUTO_RUN=false

# Migration logging
MIGRATION_LOG_LEVEL=info
MIGRATION_LOG_FILE=logs/migration.log

# ========================================
# NOTES
# ========================================
# 1. For production, use MongoDB Atlas or a properly secured MongoDB instance
# 2. Always use strong JWT secrets (32+ characters)
# 3. Enable SSL/TLS for production MongoDB connections
# 4. Configure proper backup schedules and retention policies
# 5. Monitor database performance and create appropriate indexes
# 6. Set up proper logging and monitoring for production
# 7. Use environment-specific configurations
# 8. Regularly update dependencies and security patches
# 9. Test backup and restore procedures
# 10. Monitor disk space and database growth
